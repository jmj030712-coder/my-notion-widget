<script>
  // --- 디데이 로직 (Safari 호환형) ---
  // 년, 월(0-11), 일, 시, 분, 초 순서입니다. (11월은 10으로 입력)
  const targetDate = new Date(2026, 10, 19, 9, 0, 0).getTime();
  const startDate = new Date(2026, 0, 1, 0, 0, 0).getTime();

  function updateDDay() {
    try {
      const now = new Date().getTime();
      const totalTime = targetDate - startDate;
      const elapsedTime = now - startDate;
      const timeLeft = targetDate - now;

      let progress = (elapsedTime / totalTime) * 100;
      if (progress > 100) progress = 100;
      if (progress < 0) progress = 0;

      const d = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
      const h = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const m = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
      const s = Math.floor((timeLeft % (1000 * 60)) / 1000);

      const barElement = document.getElementById('bar');
      const percentElement = document.getElementById('percent-text');
      const countdownElement = document.getElementById('countdown');

      if (barElement) barElement.style.width = progress + '%';
      if (percentElement) percentElement.innerText = progress.toFixed(6) + "% 경과";
      
      if (countdownElement) {
        if (timeLeft > 0) {
          countdownElement.innerHTML = 
            `D-${d}<span class="unit">일</span>${h}<span class="unit">시</span>${m}<span class="unit">분</span>${s}<span class="unit">초</span>`;
        } else {
          countdownElement.innerHTML = "수능 대박! 당신의 시간을 믿으세요.";
        }
      }
    } catch (e) {
      console.error("D-Day 계산 오류:", e);
    }
  }

  // --- 명언 로직 ---
  const quotes = [
    "사람은 쉽게 죽지 않는다. - 장자크 루소",
    "오늘의 땀방울이 내일의 영광이 된다. - 수험생 모드",
    "잔잔한 바다에선 유능한 뱃사공이 만들어지지 않는다. - 영국 속담",
    "지치지 않는 마음이 제일 중요해. - 응원 봇",
    "실패는 다시 시작할 기회일 뿐이다. - 헨리 포드",
    "할 수 있다고 믿는 사람이 결국 해낸다. - 정주영",
    "계획 없는 목표는 단지 희망사항일 뿐이다. - 생텍쥐페리",
    "가장 어두운 밤도 언젠가는 끝나고 해가 떠오를 것이다. - 빅토르 위고"
  ];

  function displayRandomQuote() {
    try {
      const randomIndex = Math.floor(Math.random() * quotes.length);
      const rawQuote = quotes[randomIndex];
      const box = document.getElementById("quote-box");

      if (box) {
        const parts = rawQuote.split("-");
        const text = parts[0].trim();
        const author = parts[1] ? parts[1].trim() : "";

        box.style.opacity = 0;
        setTimeout(() => {
          box.innerHTML = `${text} <span class="author">- ${author}</span>`;
          box.style.opacity = 1;
        }, 150);
      }
    } catch (e) {
      console.error("명언 표시 오류:", e);
    }
  }

  // 즉시 실행 및 반복 설정
  document.addEventListener('DOMContentLoaded', () => {
    updateDDay();
    displayRandomQuote();
    setInterval(updateDDay, 1000);
  });
</script>
